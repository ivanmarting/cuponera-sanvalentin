<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Juego de Preguntas ‚ú®</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@400;700&display=swap');
        :root { --rosa-fuerte: #fb6f92; --rosa-claro: #ffc8dd; --texto: #8a5a6a; --fondo: #fff0f5; }
        body { background-color: var(--fondo); font-family: 'Quicksand', sans-serif; margin: 0; display: flex; flex-direction: column; align-items: center; min-height: 100vh; padding: 20px; box-sizing: border-box; }
        .navbar { position: fixed; top: 0; width: 100%; display: flex; justify-content: flex-end; padding: 15px; box-sizing: border-box; z-index: 1000; }
        .dropbtn { background-color: white; color: var(--rosa-fuerte); padding: 10px 20px; font-size: 1rem; font-weight: bold; border: 2px solid var(--rosa-claro); border-radius: 25px; cursor: pointer; box-shadow: 0 4px 10 rgba(0,0,0,0.05); }
        .dropdown-content { display: none; position: absolute; right: 15px; top: 60px; background-color: white; min-width: 180px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); border: 2px solid var(--rosa-claro); overflow: hidden; }
        .dropdown-content a { color: var(--texto); padding: 12px; text-decoration: none; display: block; font-weight: 600; cursor: pointer; }
        .show { display: block; }
        .quiz-card { background: white; padding: 35px 25px; border-radius: 40px; box-shadow: 0 15px 40px rgba(251,111,146,0.15); width: 100%; max-width: 400px; text-align: center; margin-top: 60px; border: 4px solid white; outline: 3px solid var(--rosa-claro); position: relative; }
        .timer-container { font-size: 1.5rem; font-weight: bold; color: var(--rosa-fuerte); margin-bottom: 10px; }
        .timer-low { color: #e63946; animation: shake 0.5s infinite; }
        @keyframes shake { 0% { transform: translateX(0); } 25% { transform: translateX(2px); } 50% { transform: translateX(-2px); } 100% { transform: translateX(0); } }
        .question-text { font-size: 1.2rem; font-weight: 700; color: var(--texto); margin-bottom: 25px; min-height: 60px; }
        .options-grid { display: grid; gap: 12px; }
        .option-btn { background: var(--fondo); border: 2px solid var(--rosa-claro); padding: 15px; border-radius: 20px; cursor: pointer; font-family: inherit; font-weight: 600; color: var(--texto); transition: 0.3s; font-size: 1rem; }
        .modal { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 30px; border-radius: 30px; z-index: 2000; width: 85%; max-width: 320px; text-align: center; border: 5px solid var(--rosa-claro); box-shadow: 0 20px 60px rgba(0,0,0,0.2); }
        .overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 1500; backdrop-filter: blur(4px); }
        .btn { background: var(--rosa-fuerte); color: white; border: none; padding: 15px 30px; border-radius: 50px; font-weight: bold; cursor: pointer; margin-top: 20px; width: 100%; font-family: inherit; }
        .progress-dots { display: flex; justify-content: center; gap: 8px; margin-bottom: 20px; }
        .dot { width: 12px; height: 12px; border-radius: 50%; background: #ddd; }
        .dot.active { background: var(--rosa-fuerte); }
        .snoopy-thinking { width: 120px; height: auto; margin-bottom: 15px; }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="dropdown">
            <button onclick="document.getElementById('myDropdown').classList.toggle('show')" class="dropbtn">‚ò∞ Men√∫</button>
            <div id="myDropdown" class="dropdown-content">
                <a href="../index.html">üè† Inicio</a>
                <a href="jump.html">üèÉ Snoopy Jump</a>
                <a href="memorygame.html">üß© Memoria</a>
                <a href="djsnoopy.html">üéµ Dj Snoopy</a>
                <a href="codigos.html">üèÜ Mis C√≥digos</a>
                <a onclick="resetQuestionsAdmin()">üßπ Reset Preguntas (Admin)</a>
                <a onclick="resetDailyAdmin()">üîì Reset Diario (Admin)</a>
            </div>
        </div>
    </nav>
    <div id="intro-overlay" class="overlay" style="display: block;"></div>
    <div id="intro-modal" class="modal" style="display: block;">
        <img src="../assets/images/snoopy_pensando.png" alt="Snoopy Pensando" class="snoopy-thinking">
        <h2>Este es el Desaf√≠o Diario ‚ú®</h2>
        <p>¬øQu√© tan bien me y nos conoc√©s? <br><br> ‚Ä¢ Hay 5 preguntas nuevas cada d√≠a.<br> ‚Ä¢ Las que respondas bien, no vuelven a salir, pero las que respondas mal, pueden volver a salir otro d√≠a.<br> ‚Ä¢ Si respondes las 5 bien de seguido, te doy un c√≥digo.<br> ‚Ä¢ Si fallas una sola, ten√©s que esperar hasta el d√≠a siguiente.<br> ‚Ä¢ Tenes 30 segundos para responder cada una.</p>
        <button class="btn" onclick="startGame()">EMPEZAR AHORA</button>
    </div>
    <div class="quiz-card" id="quiz-ui">
        <div class="timer-container" id="timer">30s</div>
        <div class="progress-dots" id="dots"><div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>
        <div class="question-text" id="q-text">Cargando...</div>
        <div class="options-grid" id="options"></div>
    </div>
    <div class="overlay" id="overlay"></div>
    <div id="status-modal" class="modal">
        <h2 id="modal-title"></h2>
        <p id="modal-msg"></p>
        <div id="codigo-box" style="display:none; font-size: 1.5rem; font-weight: bold; color: var(--rosa-fuerte); margin: 15px 0; background: var(--fondo); padding: 10px; border-radius: 10px;"></div>
        <button class="btn" onclick="location.href='../index.html'">Volver</button>
    </div>

    <script>
        const POOL_PREGUNTAS = [
            { id: 1, q: "¬øCu√°l es mi color favorito?", o: ["Azul", "Negro", "Verde", "Rojo"], a: 3 },
            { id: 2, q: "¬øEn qu√© ciudad nac√≠?", o: ["Barranqueras", "Resistencia", "Corrientes", "Fontana"], a: 1 },
            { id: 3, q: "¬øCu√°l es mi perfume favorito de mi colecci√≥n?", o: ["Banderas KOF", "Bad Boy CH", "Bensimon Brave"], a: 1 },
            { id: 4, q: "¬øCu√°l es mi videojuego favorito de toda la vida?", o: ["Silent Hill 2", "Resident Evil 4", "Half-Life 2", "Asassins Creed 3"], a: 2 },
            { id: 5, q: "¬øMi nombre en videojuegos es...?", o: ["Ivanov", "Tuki", "DarkCrow", "Sokolov"], a: 3 },
            { id: 6, q: "¬øQu√© prefiero comer?", o: ["Milanesas", "Hamburguesas", "Pizza", "Torta Parrilla"], a: 2 },
            { id: 7, q: "¬øCu√°l carrera nunca estudi√©?", o: ["Programaci√≥n", "Psciolog√≠a", "Contador", "Inform√°tica"], a: 3 },
            { id: 8, q: "¬øQu√© pel√≠cula NO vimos juntos?", o: ["7 Magn√≠ficos", "Harta", "Thunderbolts", "Recuerdame"], a: 3 },
            { id: 9, q: "¬øPrimera serie que vimos?", o: ["La de la Prision", "Nadie quiere esto", "Ozarks", "Brooklyn 99"], a: 1 },
            { id: 10, q: "¬øSabor de helado favorito?", o: ["Dulce de Leche", "Granizado", "Rocher", "Bananasplit"], a: 0 },
            { id: 11, q: "¬øColor de pelo que NUNCA tuve?", o: ["Celeste", "Rojo", "Blanco", "Verde"], a: 3 },
            { id: 12, q: "¬øNombre de mi Abuela?", o: ["Bettina", "Roberta", "Roxana", "Daniela"], a: 1 },
            { id: 13, q: "¬øCu√°l NO fue un trabajo m√≠o?", o: ["Bombero", "Mozo", "Quinielero", "Creador de Contenido"], a: 2},
            { id: 14, q: "¬øConsola favorita?", o: ["PS3", "PS2", "Xbox 360", "PS1"], a: 1 },
            { id: 15, q: "¬øPrimer lugar donde cenamos?", o: ["Shopping", "Foodie", "La Usina", "La Pettit"], a: 1 },
            { id: 16, q: "¬øAlfajor favorito?", o: ["√Åguila Brownie", "Rasta Negro", "Terrabusi", "Chocotorta"], a: 0 },
            { id: 17, q: "¬øCuantas cosas (materiales) te regal√© en tu cumple a√±os?", o: ["Tres", "Cuatro", "Dos", "Cinco"], a: 0 },
            { id: 18, q: "¬øQu√© comimos la 1ra vez que viniste a casa?", o: ["Chipa/Pizza", "Hamburguesa", "Chipa/Burger", "Solo Burger"], a: 2 },
            { id: 19, q: "¬øDeporte que NUNCA entren√©?", o: ["Futbol", "Voley", "Basquet", "Nataci√≥n"], a: 3 },
            { id: 20, q: "¬øPel√≠cula animada favorita?", o: ["Tarzan", "UP", "Planeta Tesoro", "Wall-E"], a: 2 },
            { id: 21, q: "¬øSuperh√©roe favorito tras Spidey?", o: ["Daredevil", "Superman", "Star-Lord", "Thor"], a: 0},
            { id: 22, q: "¬øArtista favorito?", o: ["Manson", "Cerati", "Tan Bionica", "Avril"], a: 2 },
            { id: 23, q: "¬øQu√© tanto me amas?", o: ["Mucho", "Much√≠simo", "Tanto que te compro una Play 5", "Algo"], a: 2 },
            { id: 24, q: "Si un hombre te habla...", o: ["Le contesto", "Le Disparo", "Aviso a Iv√°n", "Ignoro"], a: 1 },
            { id: 25, q: "¬øCu√°l de estos Artistas NO soporto su m√∫sica?", o: ["Bad Bunny", "Maria Becerra", "La Joaqui", "Milo J"], a: 2 },
            { id: 26, q: "¬øCu√°l de estas cosas guardo sin contexto en el cajon de mi mesita de luz?", o: ["Un Silbato", "Una Lija", "Una Toallita Femenina", "Todas"], a: 3 },
            { id: 27, q: "¬øCuantos Meses pasaron desde que hablamos hasta ser Novios?", o: ["5", "3", "6", "4"], a: 0},
            { id: 28, q: "¬øDe cu√°l de estos superh√©roes no tengo juguete o peluche?", o: ["Capitana Marvel", "Batman", "Spider-Man", "Superman"], a: 3 },
            { id: 29, q: "¬øEn qu√© brazo tengo una cicatriz?", o: ["Izquierdo", "Derecho", "Ninguno"], a: 2 },
            { id: 30, q: "¬øDe qu√© marca es el auto de mi pap√°?", o: ["Peugeot", "Chevrolet", "Volkwswagen", "Toyota"], a: 3 }
        ];
        const CODIGOS_MAESTROS = ["culogordo", "ternerito", "05052025", "bebota", "elefante", "cocodrilo", "mariquita", "01022025", "24032025", "snoopy", "sanvalentin", "papasfritas", "peonias", "hombreara√±a", "patatuilla", "silenciogil", "chipamboca", "colorincolorao", "gatitoexplota", "pinguinoenojado", "uncodigorandom", "uncodigorandom2", "equisde", "esnupi", "ca1000", "hayquematarlo"];
        let dailySet = [], currentIndex = 0, timer, timeLeft = 30;
        function initQuiz() {
            const lastDate = localStorage.getItem('quizLastDate'); const now = new Date().toLocaleDateString();
            if (lastDate !== now) { localStorage.removeItem('quizState'); localStorage.removeItem('quizDailySet'); localStorage.removeItem('quizCurrentIndex'); localStorage.setItem('quizLastDate', now); }
            const state = localStorage.getItem('quizState');
            if (state === 'won' || state === 'failed' || state === 'in_progress') {
                document.getElementById('intro-modal').style.display = 'none'; document.getElementById('intro-overlay').style.display = 'none';
                if(state === 'won') showModal("Ya sacaste tu c√≥digo diario üåü", "Volv√© ma√±ana para m√°s.");
                else if(state === 'in_progress') failGame("Abandonaste el desaf√≠o anterior...");
                else showModal("D√≠a bloqueado ‚ùå", "Intent√° de nuevo ma√±ana.");
            }
        }
        function startGame() {
            localStorage.setItem('quizState', 'in_progress');
            const hist = JSON.parse(localStorage.getItem('quizCorrectasHistoricas')) || [];
            const pool = POOL_PREGUNTAS.filter(p => !hist.includes(p.id));
            if (pool.length < 5) { showModal("¬°Genia! üéì", "Respondiste casi todo."); return; }
            document.getElementById('intro-modal').style.display = 'none'; document.getElementById('intro-overlay').style.display = 'none';
            const saved = localStorage.getItem('quizDailySet');
            if (saved) { dailySet = JSON.parse(saved); currentIndex = parseInt(localStorage.getItem('quizCurrentIndex')) || 0; }
            else { dailySet = pool.sort(() => 0.5 - Math.random()).slice(0, 5); localStorage.setItem('quizDailySet', JSON.stringify(dailySet)); currentIndex = 0; }
            renderQuestion();
        }
        function startTimer() {
            clearInterval(timer); timeLeft = 30; const tDiv = document.getElementById('timer'); tDiv.classList.remove('timer-low'); tDiv.innerText = "30s";
            timer = setInterval(() => { timeLeft--; tDiv.innerText = timeLeft + "s"; if (timeLeft <= 10) tDiv.classList.add('timer-low'); if (timeLeft <= 0) { clearInterval(timer); failGame("¬°Tiempo agotado! ‚è∞"); } }, 1000);
        }
        function renderQuestion() {
            startTimer(); const q = dailySet[currentIndex]; document.getElementById('q-text').innerText = q.q;
            const optDiv = document.getElementById('options'); optDiv.innerHTML = "";
            q.o.forEach((opt, i) => { const btn = document.createElement('button'); btn.className = 'option-btn'; btn.innerText = opt; btn.onclick = () => checkAnswer(i); optDiv.appendChild(btn); });
            const dots = document.querySelectorAll('.dot'); dots.forEach((d, i) => d.className = i < currentIndex ? 'dot active' : 'dot');
        }
        function checkAnswer(idx) {
            clearInterval(timer);
            if (idx === dailySet[currentIndex].a) {
                let hist = JSON.parse(localStorage.getItem('quizCorrectasHistoricas')) || [];
                if(!hist.includes(dailySet[currentIndex].id)) { hist.push(dailySet[currentIndex].id); localStorage.setItem('quizCorrectasHistoricas', JSON.stringify(hist)); }
                currentIndex++; localStorage.setItem('quizCurrentIndex', currentIndex);
                if (currentIndex === 5) winGame(); else renderQuestion();
            } else { failGame("Incorrecto üíî"); }
        }
        function winGame() {
            localStorage.setItem('quizState', 'won');
            let cons = JSON.parse(localStorage.getItem('codigosConseguidos')) || [];
            let disp = CODIGOS_MAESTROS.filter(c => !cons.includes(c));
            let premio = disp.length > 0 ? disp[Math.floor(Math.random()*disp.length)] : "CAMPEONA";
            if(disp.length > 0) { cons.push(premio); localStorage.setItem('codigosConseguidos', JSON.stringify(cons)); }
            document.getElementById('codigo-box').innerText = premio.toUpperCase(); document.getElementById('codigo-box').style.display = 'block';
            showModal("¬°PERFECTO! üèÜ", "Tu c√≥digo de hoy:");
        }
        function failGame(msg) { clearInterval(timer); localStorage.setItem('quizState', 'failed'); showModal("Muerte S√∫bita üíî", msg + " Ma√±ana volv√©s a intentar."); }
        function showModal(title, msg) { document.getElementById('modal-title').innerText = title; document.getElementById('modal-msg').innerText = msg; document.getElementById('overlay').style.display = 'block'; document.getElementById('status-modal').style.display = 'block'; }
        function resetQuestionsAdmin() { if(prompt("Pass Admin:") === "ivancito") { localStorage.removeItem('quizCorrectasHistoricas'); location.reload(); } }
        function resetDailyAdmin() { if(prompt("Pass Admin:") === "ivancito") { localStorage.removeItem('quizLastDate'); localStorage.removeItem('quizState'); location.reload(); } }
        initQuiz();
    </script>
</body>
</html>